M1:{"id":19,"chunks":[0],"name":"Counter"}
J0:["$","main",null,{"children":[["$","h1",null,{"children":"React server components + MDX"}],"\n",["$","p",null,{"children":["Hi! üëã\nThis is a demo of ",["$","a",null,{"href":"https://reactjs.org/server-components","children":"React server components"}]," with MDX to show that they can\nwork together.\nThe source code is ",["$","a",null,{"href":"https://github.com/wooorm/server-components-mdx-demo","children":"on GitHub"}],"."]}],"\n",["$","p",null,{"children":["What you‚Äôre reading right now is ",["$","code",null,{"children":["<",["$","a",null,{"href":"https://github.com/wooorm/server-components-mdx-demo/blob/main/src/content.server.mdx","children":"Content"}]," />"]}],", an MDX file as\na component!"]}],"\n",["$","blockquote",null,{"children":["\n",["$","p",null,{"children":["üíÅ‚Äç‚ôÄÔ∏è It‚Äôs going to take like at least a year for the stuff discussed and shown\nhere to become stable.",["$","br",null,{}],"\n","This demo is showing cool stuff coming in the future, don‚Äôt depend on this!"]}],"\n"]}],"\n",["$","h2",null,{"children":"What?"}],"\n",["$","p",null,{"children":"Server components can be boiled down to doing the work on a server and\nbeing very smart about which components and data are sent to the client.\nIt‚Äôs a rather seamless authoring experience.\nThis demo is compiled ahead of time so ‚Äúserver‚Äù can also be a build step.\nMDX is a mix between markdown and JSX.\nIt‚Äôs a great way for combining content with components."}],"\n",["$","p",null,{"children":"For an example, what you‚Äôre reading here is MDX as a server component (so it‚Äôs\ncompiled on the server), but it includes dynamic client components.\nTry it out:"}],"\n",["$","p",null,{"children":[["$","@1",null,{}],"."]}],"\n",["$","p",null,{"children":["The above ",["$","code",null,{"children":["<",["$","a",null,{"href":"https://github.com/wooorm/server-components-mdx-demo/blob/main/src/counter.client.js","children":"Counter"}]," />"]}]," is a client component: it‚Äôs sent to\nthe client.\nAs this whole MDX document is a server component, it can include more server\ncomponents.\nHere is an example of a ",["$","a",null,{"href":"https://en.wikipedia.org/wiki/Phyllotaxis","children":"phyllotaxis"}]," as a server component,\n",["$","code",null,{"children":["<",["$","a",null,{"href":"https://github.com/wooorm/server-components-mdx-demo/blob/main/src/phyllotaxis.server.js","children":"Phyllotaxis"}]," />"]}],", which is static:"]}],"\n",["$","svg",null,{"width":352,"height":352,"viewBox":"0 0 352 352","style":{"color":"var(--hl)","display":"block","margin":"0 auto","height":"auto"},"children":[["$","circle","0.5",{"fill":"currentcolor","cx":180.587980089721,"cy":181.3805611878617,"r":3}],["$","circle","1.5",{"fill":"currentcolor","cx":165.54197626867372,"cy":182.37414618870764,"r":3}],["$","circle","2.5",{"fill":"currentcolor","cx":170.00783365976503,"cy":161.36805062368808,"r":3}],["$","circle","3.5",{"fill":"currentcolor","cx":194.21559243011396,"cy":171.73476935911137,"r":3}],["$","circle","4.5",{"fill":"currentcolor","cx":177.5117751157341,"cy":197.15926596079,"r":3}],["$","circle","5.5",{"fill":"currentcolor","cx":152.63734742366307,"cy":173.95391481179834,"r":3}],["$","circle","6.5",{"fill":"currentcolor","cx":182.20969419152752,"cy":151.27269327145171,"r":3}],["$","circle","7.5",{"fill":"currentcolor","cx":201.17365747382019,"cy":186.78364360458824,"r":3}],["$","circle","8.5",{"fill":"currentcolor","cx":160.42939053636806,"cy":200.64865353180687,"r":3}],["$","circle","9.5",{"fill":"currentcolor","cx":152.87025778402878,"cy":155.62808244119572,"r":3}],["$","circle","10.5",{"fill":"currentcolor","cx":200.99067783037793,"cy":155.37317228514632,"r":3}],["$","circle","11.5",{"fill":"currentcolor","cx":193.1827780067694,"cy":205.23614441013183,"r":3}],["$","circle","12.5",{"fill":"currentcolor","cx":143.07139244401185,"cy":188.87271550309876,"r":3}],["$","circle","13.5",{"fill":"currentcolor","cx":168.19778093126294,"cy":140.09560782294963,"r":3}],["$","circle","14.5",{"fill":"currentcolor","cx":214.0206644396895,"cy":173.8954630997462,"r":3}],["$","circle","15.5",{"fill":"currentcolor","cx":171.93691154317418,"cy":215.15981757097458,"r":3}],["$","circle","16.5",{"fill":"currentcolor","cx":136.76674638296635,"cy":165.47613138520273,"r":3}],["$","circle","17.5",{"fill":"currentcolor","cx":193.08656068894632,"cy":137.81558637581358,"r":3}],["$","circle","18.5",{"fill":"currentcolor","cx":211.99094068702811,"cy":199.5510549331198,"r":3}],["$","circle","19.5",{"fill":"currentcolor","cx":146.28570126894286,"cy":208.6658912463979,"r":3}],["$","circle","20.5",{"fill":"currentcolor","cx":147.7420590563231,"cy":140.6236127675017,"r":3}],["$","circle","21.5",{"fill":"currentcolor","cx":216.34664542586373,"cy":153.14943758067145,"r":3}],["$","circle","22.5",{"fill":"currentcolor","cx":192.56018340704935,"cy":220.44952559392382,"r":3}],["$","circle","23.5",{"fill":"currentcolor","cx":128.46985194034838,"cy":185.53336380442892,"r":3}],["$","circle","24.5",{"fill":"currentcolor","cx":174.0569405403152,"cy":126.54067812903082,"r":3}],["$","circle","25.5",{"fill":"currentcolor","cx":226.13789541226018,"cy":182.01593248210617,"r":3}],["$","circle","26.5",{"fill":"currentcolor","cx":161.86777263857812,"cy":225.5003045425488,"r":3}],["$","circle","27.5",{"fill":"currentcolor","cx":128.4827927068342,"cy":153.8163345892003,"r":3}],["$","circle","28.5",{"fill":"currentcolor","cx":205.94352493559364,"cy":131.80288115237056,"r":3}],["$","circle","29.5",{"fill":"currentcolor","cx":215.5869878143256,"cy":213.18696540171618,"r":3}],["$","circle","30.5",{"fill":"currentcolor","cx":132.3024787546731,"cy":209.77168395289468,"r":3}],["$","circle","31.5",{"fill":"currentcolor","cx":149.12760226357128,"cy":126.72653614880338,"r":3}],["$","circle","32.5",{"fill":"currentcolor","cx":229.73385084675468,"cy":156.95601740237294,"r":3}],["$","circle","33.5",{"fill":"currentcolor","cx":186.47130058007133,"cy":232.9240886107261,"r":3}],["$","circle","34.5",{"fill":"currentcolor","cx":117.2791544548979,"cy":177.3646605688831,"r":3}],["$","circle","35.5",{"fill":"currentcolor","cx":184.0455354849638,"cy":116.96383008053294,"r":3}],["$","circle","36.5",{"fill":"currentcolor","cx":233.82068655295615,"cy":193.51479964329582,"r":3}],["$","circle","37.5",{"fill":"currentcolor","cx":149.208940017336,"cy":231.06577072016063,"r":3}],["$","circle","38.5",{"fill":"currentcolor","cx":125.19537518103917,"cy":140.37851635593165,"r":3}],["$","circle","39.5",{"fill":"currentcolor","cx":219.75943619727573,"cy":130.88778720017655,"r":3}],["$","circle","40.5",{"fill":"currentcolor","cx":214.10403833927074,"cy":226.97138670116192,"r":3}],["$","circle","41.5",{"fill":"currentcolor","cx":118.9564328702309,"cy":205.9337844101197,"r":3}],["$","circle","42.5",{"fill":"currentcolor","cx":155.21013660166273,"cy":114.21180064220614,"r":3}],["$","circle","43.5",{"fill":"currentcolor","cx":241.04911257916166,"cy":165.10904261951444,"r":3}],["$","circle","44.5",{"fill":"currentcolor","cx":176.48065676793837,"cy":242.70658864813458,"r":3}],["$","circle","45.5",{"fill":"currentcolor","cx":109.31870797171791,"cy":165.82133145057935,"r":3}],["$","circle","46.5",{"fill":"currentcolor","cx":196.81260889416927,"cy":111.06283567156366,"r":3}],["$","circle","47.5",{"fill":"currentcolor","cx":237.48319019960078,"cy":207.14189016228323,"r":3}],["$","circle","48.5",{"fill":"currentcolor","cx":135.11020423835558,"cy":232.37397096684788,"r":3}],["$","circle","49.5",{"fill":"currentcolor","cx":126.29092600146278,"cy":126.2103629034319,"r":3}],["$","circle","50.5",{"fill":"currentcolor","cx":233.59207090196543,"cy":134.3688413658353,"r":3}],["$","circle","51.5",{"fill":"currentcolor","cx":208.32291262557894,"cy":240.07206348635253,"r":3}],["$","circle","52.5",{"fill":"currentcolor","cx":106.96469088022889,"cy":198.0028656028629,"r":3}],["$","circle","53.5",{"fill":"currentcolor","cx":165.07982282712445,"cy":103.6760777438543,"r":3}],["$","circle","54.5",{"fill":"currentcolor","cx":249.82124072166334,"cy":176.65147395514472,"r":3}],["$","circle","55.5",{"fill":"currentcolor","cx":163.57925225830175,"cy":249.45559900740784,"r":3}],["$","circle","56.5",{"fill":"currentcolor","cx":104.79704317432204,"cy":151.91392644533693,"r":3}],["$","circle","57.5",{"fill":"currentcolor","cx":211.3434625283873,"cy":108.91170253684713,"r":3}],["$","circle","58.5",{"fill":"currentcolor","cx":237.18574243321646,"cy":221.89449774097213,"r":3}],["$","circle","59.5",{"fill":"currentcolor","cx":120.5457087214088,"cy":229.61736266163385,"r":3}],["$","circle","60.5",{"fill":"currentcolor","cx":131.44929895220758,"cy":112.24080430126,"r":3}],["$","circle","61.5",{"fill":"currentcolor","cx":246.5740615105526,"cy":141.80494418918528,"r":3}],["$","circle","62.5",{"fill":"currentcolor","cx":198.79660763240324,"cy":251.6988420020693,"r":3}],["$","circle","63.5",{"fill":"currentcolor","cx":97.02563814647571,"cy":186.63250534110418,"r":3}],["$","circle","64.5",{"fill":"currentcolor","cx":177.99594611715696,"cy":95.71291387092562,"r":3}],["$","circle","65.5",{"fill":"currentcolor","cx":255.572750946285,"cy":190.77082620710505,"r":3}],["$","circle","66.5",{"fill":"currentcolor","cx":148.63432261526395,"cy":252.8187457673877,"r":3}],["$","circle","67.5",{"fill":"currentcolor","cx":103.93483088655837,"cy":136.54608510361663,"r":3}],["$","circle","68.5",{"fill":"currentcolor","cx":226.71734989553244,"cy":110.59548624464719,"r":3}],["$","circle","69.5",{"fill":"currentcolor","cx":232.97997319727887,"cy":236.85460257398267,"r":3}],["$","circle","70.5",{"fill":"currentcolor","cx":106.41081754055676,"cy":222.98239760406355,"r":3}],["$","circle","71.5",{"fill":"currentcolor","cx":140.3540367220964,"cy":99.32298061354793,"r":3}],["$","circle","72.5",{"fill":"currentcolor","cx":257.91324078671863,"cy":152.7573455944236,"r":3}],["$","circle","73.5",{"fill":"currentcolor","cx":186.0756881491331,"cy":261.1380085996931,"r":3}],["$","circle","74.5",{"fill":"currentcolor","cx":89.75874814231693,"cy":172.47204336482474,"r":3}],["$","circle","75.5",{"fill":"currentcolor","cx":193.2257214917848,"cy":90.8338417028955,"r":3}],["$","circle","76.5",{"fill":"currentcolor","cx":257.9113195092358,"cy":206.6681550839936,"r":3}],["$","circle","77.5",{"fill":"currentcolor","cx":132.49211706208155,"cy":252.53145838320597,"r":3}],["$","circle","78.5",{"fill":"currentcolor","cx":106.86329596336756,"cy":120.59137111468024,"r":3}],["$","circle","79.5",{"fill":"currentcolor","cx":242.0540531330065,"cy":116.10958286418474,"r":3}],["$","circle","80.5",{"fill":"currentcolor","cx":225.00560649733927,"cy":251.15617427615604,"r":3}],["$","circle","81.5",{"fill":"currentcolor","cx":93.53684891141458,"cy":212.74001514073086,"r":3}],["$","circle","82.5",{"fill":"currentcolor","cx":152.61001045773867,"cy":88.2337856050923,"r":3}],["$","circle","83.5",{"fill":"currentcolor","cx":266.9055594294803,"cy":166.71672122506172,"r":3}],["$","circle","84.5",{"fill":"currentcolor","cx":170.77093962246965,"cy":267.77503433705783,"r":3}],["$","circle","85.5",{"fill":"currentcolor","cx":85.67450974721973,"cy":156.21854882484865,"r":3}],["$","circle","86.5",{"fill":"currentcolor","cx":210.00305634381095,"cy":89.4333080262413,"r":3}],["$","circle","87.5",{"fill":"currentcolor","cx":256.5677247547578,"cy":223.52727351575712,"r":3}],["$","circle","88.5",{"fill":"currentcolor","cx":115.99877739016361,"cy":248.45587129643022,"r":3}],["$","circle","89.5",{"fill":"currentcolor","cx":113.58602744395944,"cy":104.90502106495975,"r":3}],["$","circle","90.5",{"fill":"currentcolor","cx":256.5103100628743,"cy":125.32367442700844,"r":3}],["$","circle","91.5",{"fill":"currentcolor","cx":213.5232100318675,"cy":263.98868511862395,"r":3}],["$","circle","92.5",{"fill":"currentcolor","cx":82.6816581351769,"cy":199.2741717704412,"r":3}],["$","circle","93.5",{"fill":"currentcolor","cx":167.71977508940716,"cy":79.6597805927867,"r":3}],["$","circle","94.5",{"fill":"currentcolor","cx":272.952592006186,"cy":183.08483615068405,"r":3}],["$","circle","95.5",{"fill":"currentcolor","cx":153.56620119291324,"cy":271.1142716477562,"r":3}],["$","circle","96.5",{"fill":"currentcolor","cx":85.15371708292267,"cy":138.6241671644585,"r":3}],["$","circle","97.5",{"fill":"currentcolor","cx":227.52648048700598,"cy":91.7680475791865,"r":3}],["$","circle","98.5",{"fill":"currentcolor","cx":251.41539553870928,"cy":240.5175798968004,"r":3}],["$","circle","99.5",{"fill":"currentcolor","cx":99.99313492969306,"cy":240.59842461069894,"r":3}],["$","circle","100.5",{"fill":"currentcolor","cx":123.96405628348495,"cy":90.3130082128467,"r":3}],["$","circle","101.5",{"fill":"currentcolor","cx":269.2937514016312,"cy":137.97006508800425,"r":3}],["$","circle","102.5",{"fill":"currentcolor","cx":198.92217810877835,"cy":274.61325342340876,"r":3}],["$","circle","103.5",{"fill":"currentcolor","cx":74.51211750061272,"cy":183.08588073499382,"r":3}],["$","circle","104.5",{"fill":"currentcolor","cx":185.08357701314264,"cy":74.17913461060003,"r":3}],["$","circle","105.5",{"fill":"currentcolor","cx":275.5793179992046,"cy":201.178550927591,"r":3}],["$","circle","106.5",{"fill":"currentcolor","cx":135.21055368260562,"cy":270.79568064590495,"r":3}],["$","circle","107.5",{"fill":"currentcolor","cx":88.43250947528226,"cy":120.48482546903534,"r":3}],["$","circle","108.5",{"fill":"currentcolor","cx":244.97348481093076,"cy":97.94451721348267,"r":3}],["$","circle","109.5",{"fill":"currentcolor","cx":242.48005463729774,"cy":256.8109048051184,"r":3}],["$","circle","110.5",{"fill":"currentcolor","cx":85.28796906607884,"cy":229.11616932576496,"r":3}],["$","circle","111.5",{"fill":"currentcolor","cx":137.71318230816115,"cy":77.59207556791021,"r":3}],["$","circle","112.5",{"fill":"currentcolor","cx":279.6833899144099,"cy":153.64480695998247,"r":3}],["$","circle","113.5",{"fill":"currentcolor","cx":181.71576947312744,"cy":282.3829402645465,"r":3}],["$","circle","114.5",{"fill":"currentcolor","cx":69.58471613734437,"cy":164.78450355844996,"r":3}],["$","circle","115.5",{"fill":"currentcolor","cx":204.01159650197442,"cy":72.2437931427205,"r":3}],["$","circle","116.5",{"fill":"currentcolor","cx":274.4497634367867,"cy":220.24527182921054,"r":3}],["$","circle","117.5",{"fill":"currentcolor","cx":116.50008999244059,"cy":266.6077298528792,"r":3}],["$","circle","118.5",{"fill":"currentcolor","cx":95.59267779161436,"cy":102.61974015256655,"r":3}],["$","circle","119.5",{"fill":"currentcolor","cx":261.522687731431,"cy":107.91277738670682,"r":3}],["$","circle","120.5",{"fill":"currentcolor","cx":229.94200209014227,"cy":271.6047091439908,"r":3}],["$","circle","121.5",{"fill":"currentcolor","cx":72.64645445234365,"cy":214.31507043877804,"r":3}],["$","circle","122.5",{"fill":"currentcolor","cx":154.4096779398301,"cy":67.44652012331369,"r":3}],["$","circle","123.5",{"fill":"currentcolor","cx":287.051813023141,"cy":171.81731853073506,"r":3}],["$","circle","124.5",{"fill":"currentcolor","cx":162.5277819755503,"cy":286.76325808453674,"r":3}],["$","circle","125.5",{"fill":"currentcolor","cx":68.32735202205522,"cy":145.07103497661805,"r":3}],["$","circle","126.5",{"fill":"currentcolor","cx":223.74363516183692,"cy":74.16412566519887,"r":3}],["$","circle","127.5",{"fill":"currentcolor","cx":269.37902030991324,"cy":239.4851050716686,"r":3}],["$","circle","128.5",{"fill":"currentcolor","cx":98.25387371486686,"cy":258.49569593412815,"r":3}],["$","circle","129.5",{"fill":"currentcolor","cx":106.55736926040615,"cy":85.8461257850534,"r":3}],["$","circle","130.5",{"fill":"currentcolor","cx":276.3796987355495,"cy":121.46637659424856,"r":3}],["$","circle","131.5",{"fill":"currentcolor","cx":214.1319909496996,"cy":284.147821365999,"r":3}],["$","circle","132.5",{"fill":"currentcolor","cx":62.757250802665865,"cy":196.64169940265768,"r":3}],["$","circle","133.5",{"fill":"currentcolor","cx":173.50260705916207,"cy":60.484793085503014,"r":3}],["$","circle","134.5",{"fill":"currentcolor","cx":290.8864247745889,"cy":191.8464318542922,"r":3}],["$","circle","135.5",{"fill":"currentcolor","cx":142.07316365831647,"cy":287.3506613175001,"r":3}],["$","circle","136.5",{"fill":"currentcolor","cx":71.02411611865831,"cy":124.7158523193466,"r":3}],["$","circle","137.5",{"fill":"currentcolor","cx":243.47366752465285,"cy":80.0974234403861,"r":3}],["$","circle","138.5",{"fill":"currentcolor","cx":260.3406928906897,"cy":258.0770828107235,"r":3}],["$","circle","139.5",{"fill":"currentcolor","cx":81.28671451826968,"cy":246.56481809837143,"r":3}],["$","circle","140.5",{"fill":"currentcolor","cx":121.09234811370246,"cy":70.95167890759431,"r":3}],["$","circle","141.5",{"fill":"currentcolor","cx":288.80420661551796,"cy":138.24803356322303,"r":3}],["$","circle","142.5",{"fill":"currentcolor","cx":195.52123424223709,"cy":293.7663849052849,"r":3}],["$","circle","143.5",{"fill":"currentcolor","cx":56.210383460393345,"cy":176.66915565752208,"r":3}],["$","circle","144.5",{"fill":"currentcolor","cx":194.33165432855512,"cy":57.1978516626136,"r":3}],["$","circle","145.5",{"fill":"currentcolor","cx":290.8080407780538,"cy":213.00153743704092,"r":3}],["$","circle","146.5",{"fill":"currentcolor","cx":121.13407719767429,"cy":283.88758276580876,"r":3}],["$","circle","147.5",{"fill":"currentcolor","cx":77.80422948123795,"cy":104.53259027901862,"r":3}],["$","circle","148.5",{"fill":"currentcolor","cx":262.3774943706183,"cy":90.04112340046666,"r":3}],["$","circle","149.5",{"fill":"currentcolor","cx":247.46918398519364,"cy":275.2076395268557,"r":3}],["$","circle","150.5",{"fill":"currentcolor","cx":66.38059885889159,"cy":231.07800734834876,"r":3}],["$","circle","151.5",{"fill":"currentcolor","cx":138.81283183077605,"cy":58.66665212500814,"r":3}],["$","circle","152.5",{"fill":"currentcolor","cx":298.1365387950551,"cy":157.76086923222496,"r":3}],["$","circle","153.5",{"fill":"currentcolor","cx":174.70604177625606,"cy":299.88835971194067,"r":3}],["$","circle","154.5",{"fill":"currentcolor","cx":53.475440764310406,"cy":155.07794503161819,"r":3}],["$","circle","155.5",{"fill":"currentcolor","cx":216.14953343511198,"cy":57.94062949116311,"r":3}],["$","circle","156.5",{"fill":"currentcolor","cx":286.5856526495878,"cy":234.48772031858235,"r":3}],["$","circle","157.5",{"fill":"currentcolor","cx":100.53266762761577,"cy":276.27303597974924,"r":3}],["$","circle","158.5",{"fill":"currentcolor","cx":88.63589413999695,"cy":85.34950078856608,"r":3}],["$","circle","159.5",{"fill":"currentcolor","cx":279.64206327594815,"cy":103.83128988332713,"r":3}],["$","circle","160.5",{"fill":"currentcolor","cx":231.05652333578666,"cy":290.09986519788697,"r":3}],["$","circle","161.5",{"fill":"currentcolor","cx":54.256253105541234,"cy":212.4480464784872,"r":3}],["$","circle","162.5",{"fill":"currentcolor","cx":159.19573883439085,"cy":49.636964239228575,"r":3}],["$","circle","163.5",{"fill":"currentcolor","cx":303.8223105920998,"cy":179.38480647848053,"r":3}],["$","circle","164.5",{"fill":"currentcolor","cx":152.3876717197758,"cy":302.06529242097895,"r":3}],["$","circle","165.5",{"fill":"currentcolor","cx":54.883249750844456,"cy":132.6325835553502,"r":3}],["$","circle","166.5",{"fill":"currentcolor","cx":238.148045126128,"cy":62.917638479731266,"r":3}],["$","circle","167.5",{"fill":"currentcolor","cx":278.14651886122647,"cy":255.47382389524938,"r":3}],["$","circle","168.5",{"fill":"currentcolor","cx":81.10170226417725,"cy":264.5681268111906,"r":3}],["$","circle","169.5",{"fill":"currentcolor","cx":103.32551637074708,"cy":67.97954161724064,"r":3}],["$","circle","170.5",{"fill":"currentcolor","cx":294.4951700704611,"cy":121.14660748893915,"r":3}],["$","circle","171.5",{"fill":"currentcolor","cx":211.5436923847114,"cy":302.04223868077327,"r":3}],["$","circle","172.5",{"fill":"currentcolor","cx":45.54611375850848,"cy":191.2244397102813,"r":3}],["$","circle","173.5",{"fill":"currentcolor","cx":181.596991700783,"cy":44.39956807099239,"r":3}],["$","circle","174.5",{"fill":"currentcolor","cx":305.43402520674533,"cy":202.39759683720501,"r":3}],["$","circle","175.5",{"fill":"currentcolor","cx":129.34810601852027,"cy":299.9903253804133,"r":3}],["$","circle","176.5",{"fill":"currentcolor","cx":60.611926545245666,"cy":110.1547837394377,"r":3}],["$","circle","177.5",{"fill":"currentcolor","cx":259.48680366528333,"cy":72.17344456376088,"r":3}],["$","circle","178.5",{"fill":"currentcolor","cx":265.5810097945453,"cy":275.1223621802344,"r":3}],["$","circle","179.5",{"fill":"currentcolor","cx":63.65423160926507,"cy":248.99608431070357,"r":3}],["$","circle","180.5",{"fill":"currentcolor","cx":121.52250234087484,"cy":53.19038209977195,"r":3}],["$","circle","181.5",{"fill":"currentcolor","cx":306.23434363466697,"cy":141.517892494114,"r":3}],["$","circle","182.5",{"fill":"currentcolor","cx":189.5066284562551,"cy":310.41566496411303,"r":3}],["$","circle","183.5",{"fill":"currentcolor","cx":40.76983031368937,"cy":168.0752787675759,"r":3}],["$","circle","184.5",{"fill":"currentcolor","cx":205.27333657704466,"cy":43.36112272170328,"r":3}],["$","circle","185.5",{"fill":"currentcolor","cx":302.68868227744997,"cy":225.9997778275398,"r":3}],["$","circle","186.5",{"fill":"currentcolor","cx":106.42258391747768,"cy":293.5116299405279,"r":3}],["$","circle","187.5",{"fill":"currentcolor","cx":70.67796889316926,"cy":88.49417297384258,"r":3}],["$","circle","188.5",{"fill":"currentcolor","cx":279.323591848093,"cy":85.58852192553928,"r":3}],["$","circle","189.5",{"fill":"currentcolor","cx":249.14187689115607,"cy":292.6201776916798,"r":3}],["$","circle","190.5",{"fill":"currentcolor","cx":48.953408350623604,"cy":229.93666239466998,"r":3}],["$","circle","191.5",{"fill":"currentcolor","cx":142.72959069627126,"cy":41.675468120069894,"r":3}],["$","circle","192.5",{"fill":"currentcolor","cx":314.2537961471302,"cy":164.34290555465142,"r":3}],["$","circle","193.5",{"fill":"currentcolor","cx":165.637300720615,"cy":314.71775107622324,"r":3}],["$","circle","194.5",{"fill":"currentcolor","cx":40.31328637001596,"cy":143.7646817249356,"r":3}],["$","circle","195.5",{"fill":"currentcolor","cx":229.4079737046881,"cy":46.780851477966536,"r":3}],["$","circle","196.5",{"fill":"currentcolor","cx":295.4606402029579,"cy":249.34272589902454,"r":3}],["$","circle","197.5",{"fill":"currentcolor","cx":84.4698363819042,"cy":282.64065429302565,"r":3}],["$","circle","198.5",{"fill":"currentcolor","cx":84.93284052896075,"cy":68.49756995362243,"r":3}],["$","circle","199.5",{"fill":"currentcolor","cx":296.84526225416374,"cy":102.88076456415597,"r":3}],["$","circle","200.5",{"fill":"currentcolor","cx":229.23784424070936,"cy":307.2087342390055,"r":3}],["$","circle","201.5",{"fill":"currentcolor","cx":37.683574980162604,"cy":207.9149897341625,"r":3}],["$","circle","202.5",{"fill":"currentcolor","cx":166.3184682000404,"cy":34.02722816678414,"r":3}],["$","circle","203.5",{"fill":"currentcolor","cx":318.06841333138846,"cy":188.90604251898162,"r":3}],["$","circle","204.5",{"fill":"currentcolor","cx":140.72043896902176,"cy":314.5833776953841,"r":3}],["$","circle","205.5",{"fill":"currentcolor","cx":44.411975492047816,"cy":119.12652809881769,"r":3}],["$","circle","206.5",{"fill":"currentcolor","cx":253.13915213283,"cy":54.7582942703786,"r":3}],["$","circle","207.5",{"fill":"currentcolor","cx":283.7891687641454,"cy":271.55885671738946,"r":3}],["$","circle","208.5",{"fill":"currentcolor","cx":64.34104645900004,"cy":267.554781929339,"r":3}],["$","circle","209.5",{"fill":"currentcolor","cx":103.06528179115013,"cy":50.977894435441286,"r":3}],["$","circle","210.5",{"fill":"currentcolor","cx":311.2980868844424,"cy":123.61271446801354,"r":3}],["$","circle","211.5",{"fill":"currentcolor","cx":206.42163966846897,"cy":318.2129524336016,"r":3}],["$","circle","212.5",{"fill":"currentcolor","cx":30.423678506212354,"cy":183.58515789798577,"r":3}],["$","circle","213.5",{"fill":"currentcolor","cx":191.55021317192373,"cy":30.71341813399377,"r":3}],["$","circle","214.5",{"fill":"currentcolor","cx":317.33387333261305,"cy":214.4022948376902,"r":3}],["$","circle","215.5",{"fill":"currentcolor","cx":115.6066611346786,"cy":309.8007646491546,"r":3}],["$","circle","216.5",{"fill":"currentcolor","cx":53.13940366586745,"cy":95.03535420678149,"r":3}],["$","circle","217.5",{"fill":"currentcolor","cx":275.5907688190346,"cy":67.2264794812929,"r":3}],["$","circle","218.5",{"fill":"currentcolor","cx":267.8803275841257,"cy":291.79294193962664,"r":3}],["$","circle","219.5",{"fill":"currentcolor","cx":46.84861096746721,"cy":248.5942057671779,"r":3}],["$","circle","220.5",{"fill":"currentcolor","cx":124.60936708762085,"cy":36.68380263276961,"r":3}],["$","circle","221.5",{"fill":"currentcolor","cx":322.0164739729855,"cy":147.2043522646835,"r":3}],["$","circle","222.5",{"fill":"currentcolor","cx":181.37279009146047,"cy":325.06754551757103,"r":3}],["$","circle","223.5",{"fill":"currentcolor","cx":27.623989171856095,"cy":157.70903472403597,"r":3}],["$","circle","224.5",{"fill":"currentcolor","cx":217.5999301238043,"cy":32.05749129011747,"r":3}],["$","circle","225.5",{"fill":"currentcolor","cx":311.8621209547698,"cy":239.9647097208414,"r":3}],["$","circle","226.5",{"fill":"currentcolor","cx":91.18288287183455,"cy":300.32238994673105,"r":3}],["$","circle","227.5",{"fill":"currentcolor","cx":66.40100943838091,"cy":72.37538290601923,"r":3}],["$","circle","228.5",{"fill":"currentcolor","cx":295.90393217996063,"cy":83.95084439396844,"r":3}],["$","circle","229.5",{"fill":"currentcolor","cx":248.10301132561082,"cy":309.2334633557907,"r":3}],["$","circle","230.5",{"fill":"currentcolor","cx":32.735794190307416,"cy":226.25303307978572,"r":3}],["$","circle","231.5",{"fill":"currentcolor","cx":148.9581202475611,"cy":26.271122559959622,"r":3}],["$","circle","232.5",{"fill":"currentcolor","cx":328.4490215201811,"cy":172.95109240229212,"r":3}],["$","circle","233.5",{"fill":"currentcolor","cx":154.8756989126083,"cy":327.33989528068673,"r":3}],["$","circle","234.5",{"fill":"currentcolor","cx":29.58698861722695,"cy":131.130967273319,"r":3}],["$","circle","235.5",{"fill":"currentcolor","cx":243.58478163146236,"cy":38.22374191527936,"r":3}],["$","circle","236.5",{"fill":"currentcolor","cx":301.6315848545794,"cy":264.6944467648715,"r":3}],["$","circle","237.5",{"fill":"currentcolor","cx":68.34099871235387,"cy":286.2703017214817,"r":3}],["$","circle","238.5",{"fill":"currentcolor","cx":83.93389877167068,"cy":52.00873819250397,"r":3}],["$","circle","239.5",{"fill":"currentcolor","cx":313.26840548540986,"cy":104.53403008778871,"r":3}],["$","circle","240.5",{"fill":"currentcolor","cx":224.97921031439463,"cy":323.14291337668385,"r":3}],["$","circle","241.5",{"fill":"currentcolor","cx":22.648343127649667,"cy":201.16484322432643,"r":3}],["$","circle","242.5",{"fill":"currentcolor","cx":175.3822980645826,"cy":20.277110082303608,"r":3}],["$","circle","243.5",{"fill":"currentcolor","cx":330.1809616867603,"cy":200.04643535632138,"r":3}],["$","circle","244.5",{"fill":"currentcolor","cx":127.7936968519779,"cy":324.7486212937821,"r":3}],["$","circle","245.5",{"fill":"currentcolor","cx":36.4531534972333,"cy":104.7491920668034,"r":3}],["$","circle","246.5",{"fill":"currentcolor","cx":268.5944942610204,"cy":49.2078092604049,"r":3}],["$","circle","247.5",{"fill":"currentcolor","cx":286.7917054469403,"cy":287.69242590327434,"r":3}],["$","circle","248.5",{"fill":"currentcolor","cx":47.945896293238434,"cy":267.9355563634547,"r":3}],["$","circle","249.5",{"fill":"currentcolor","cx":105.312488907007,"cy":34.743935438233365,"r":3}],["$","circle","250.5",{"fill":"currentcolor","cx":326.95283785624997,"cy":128.42647014205573,"r":3}],["$","circle","251.5",{"fill":"currentcolor","cx":199.16874020577933,"cy":332.8859760376214,"r":3}],["$","circle","252.5",{"fill":"currentcolor","cx":17.10907651807827,"cy":174.0831184016475,"r":3}],["$","circle","253.5",{"fill":"currentcolor","cx":203.0537657981031,"cy":19.09845840100425,"r":3}],["$","circle","254.5",{"fill":"currentcolor","cx":326.9521666446285,"cy":227.60855922511595,"r":3}],["$","circle","255.5",{"fill":"currentcolor","cx":101.03990704679994,"cy":317.1771386041225,"r":3}]]}],"\n",["$","p",null,{"children":["Whether an ",["$","code",null,{"children":".mdx"}]," (or ",["$","code",null,{"children":".js"}],") file is a ",["$","em",null,{"children":"server"}]," or ",["$","em",null,{"children":"client"}]," component is\ndefined by their extension (respectively, ",["$","code",null,{"children":"xxx.server.{js,mdx}"}]," or\n",["$","code",null,{"children":"xxx.client.{js,mdx}"}],").\nYou can open your dev tools to see that only the ",["$","code",null,{"children":"<Counter />"}]," and the embedded\n",["$","code",null,{"children":"<Confetti />"}]," are sent to clients (in ",["$","code",null,{"children":"0.index.js"}],").\nThe rest is compiled away."]}],"\n",["$","p",null,{"children":["So how is this different from MDX, currently?\nWell: an ",["$","code",null,{"children":".mdx"}]," file is treated like any other component right now.\nSo sure, it can be rendered on the server, but then it can‚Äôt include interactive\nthings (such as ",["$","code",null,{"children":"<Counter />"}],").\nOr it can be rendered on the client, but then a lot of otherwise static things\n(",["$","code",null,{"children":"<Phyllotaxis />"}]," and all these paragraphs) are rendered there, too.\nThis is solved with RSC."]}],"\n",["$","h2",null,{"children":"Why?"}],"\n",["$","p",null,{"children":["React server components run on the server and have zero impact on bundle size.\nThey seamlessly integrate with client components.\nThe hot sauce‚Ñ¢ (as in, tooling) that combines them results in a perfect hybrid\nblend.\nMDX is nice on top for more content heavy things, because it‚Äôs so much nicer to\nwrite ",["$","code",null,{"children":"*emphasis*"}]," than ",["$","code",null,{"children":"<em>emphasis</em>"}]," for pages such as this one."]}],"\n",["$","h2",null,{"children":"How?"}],"\n",["$","p",null,{"children":["First, ",["$","code",null,{"children":"react-server-dom-webpack"}]," needs to be ",["$","a",null,{"href":"https://github.com/wooorm/server-components-mdx-demo/blob/main/patches/react-server-dom-webpack+0.0.0-experimental-0cf9fc10b.patch","children":"patched"}]," to treat MDX files the\nway it treats JS files.\nHopefully the React team will allow ",["$","code",null,{"children":".mdx"}]," or make extensions configurable."]}],"\n",["$","p",null,{"children":["The second step makes sure you can require/import ",["$","code",null,{"children":".mdx"}]," files in Node and\ndepends on whether you‚Äôre using CJS or ESM.\nIn CJS (which has ",["$","code",null,{"children":"require"}]," calls, ",["$","em",null,{"children":"discouraged"}],"), add a\n",["$","code",null,{"children":["require('",["$","a",null,{"href":"https://github.com/wooorm/xdm#requiring-mdx-files-directly","children":"xdm/register.cjs"}],"')"]}]," call somewhere in your\nserver next to\nwhere you‚Äôre doing ",["$","code",null,{"children":"require('react-server-dom-webpack/node-register')"}],".\nIn ESM (",["$","em",null,{"children":"recommended"}],"), import ",["$","a",null,{"href":"https://github.com/wooorm/xdm#importing-mdx-files-directly","children":["$","code",null,{"children":"xdm/esm-loader.js"}]}],",\n",["$","code",null,{"children":"$@node-loader/babel"}],", and ",["$","code",null,{"children":"react-server-dom-webpack/node-loader"}],", then combine\nthem in a ",["$","code",null,{"children":"node-loader.config.js"}]," ",["$","a",null,{"href":"https://github.com/wooorm/server-components-mdx-demo/blob/main/node-loader.config.js","children":"like so"}],", and finally run your\nserver with ",["$","code",null,{"children":"--experimental-loader @node-loader/core"}],"."]}],"\n",["$","p",null,{"children":["Lastly, make sure webpack can bundle ",["$","code",null,{"children":".mdx"}]," files.\nAdd something along the lines of ",["$","code",null,{"children":["{test: /\\.mdx$/, use:\n'",["$","a",null,{"href":"https://github.com/wooorm/xdm#webpack","children":"xdm/webpack.cjs"}],"'}"]}]," to ",["$","code",null,{"children":"module.rules"}]," in the webpack config."]}],"\n",["$","h2",null,{"children":"A few more things!"}],"\n",["$","blockquote",null,{"children":["\n",["$","p",null,{"children":["üíÅ‚Äç‚ôÄÔ∏è This section walks through some things I added which are currently complex\nto solve with RSC.\nThe wiring I‚Äôm doing here is supposed to be ",["$","strong",null,{"children":"much easier"}]," when RSC ships,\nand/or ",["$","strong",null,{"children":"handled for you"}]," by something like Next."]}],"\n"]}],"\n",["$","p",null,{"children":["The ",["$","a",null,{"href":"https://github.com/reactjs/server-components-demo","children":"React notes"}]," demo by the React team sends an empty HTML shell to the\nclient, just like a client-only app.\nThe intended solution (which isn‚Äôt built out yet) is to send rendered HTML,\nwhich is then hydrated by the client.\nThis demo shows that that can work: this page is rendered on the server and\nlater hydrated, so that users (even those without JavaScript on) can immediately\nstart reading. üïö ‚¨ÖÔ∏è üöô üí®"]}],"\n",["$","p",null,{"children":["The first thing the client in React notes does is ask the server: ‚Äúhey, what\ndata and components do I need to render this page?‚Äù\nThe server responds by streaming the needed data and URLs for the needed\ncomponents.\nCan that first network request be removed?\nSo I tried embedded that first response ",["$","em",null,{"children":"into"}]," the HTML to save a roundtrip.\nOne idea on how to do it, is to embed the payload in a\n",["$","code",null,{"children":"<script type=text> ‚Ä¶ </script>"}],".\nIt‚Äôs a pretty good idea but there‚Äôs a big catch: you can‚Äôt include the\ncharacters ",["$","code",null,{"children":"</script>"}]," inside a script.\nCharacter references (",["$","code",null,{"children":"&lt;"}],") don‚Äôt work in them either.\nSo that didn‚Äôt work.\nInstead, this demo embeds the payload at the bottom of the page in hidden PNG\nimage (ü§Ø).\nUsing a PNG compresses a bit worse than a ",["$","code",null,{"children":"<script>"}]," but both are otherwise just\nas fast.\nSee the ",["$","a",null,{"href":"https://github.com/lovasoa/bin2png","children":[["$","code",null,{"children":"bin2png"}]," and ",["$","code",null,{"children":"png2bin"}]]}]," repo for more about the method."]}],"\n",["$","p",null,{"children":["This payload to hydrate the page currently contains the whole page.\nIn a perfect world that wouldn‚Äôt be necessary because we‚Äôve already rendered it\non the server and most of the data isn‚Äôt needed because a lot here is static.\nSending ",["$","em",null,{"children":"only"}]," what‚Äôs needed for faster and smaller hydration, is another thing\nthe React team is planning on solving before RSC ship."]}],"\n",["$","p",null,{"children":"Finally, this demo is a static site, rendered in a build step, so that it can be\ndeployed to any static hosting service (GH pages, Netlify, etc).\nAnd this demo is 100% ESM."}],"\n",["$","h2",null,{"children":"When?"}],"\n",["$","p",null,{"children":["Server components are very much in the ",["$","strong",null,{"children":"danger zone"}],".\nThey are not ready for adoption.\nYou shouldn‚Äôt use this!\nAgain: it‚Äôs going to take at least another year for things to become stable in\nthis space.\nAs for ",["$","a",null,{"href":"https://github.com/wooorm/xdm","children":["$","code",null,{"children":"xdm"}]}],", that‚Äôs stable!"]}],"\n",["$","h2",null,{"children":"Recap"}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"React server components are experimental, it‚Äôs not shipping soon"}],"\n",["$","li",null,{"children":"MDX works fine with RSC, it‚Äôs transformed on the server"}],"\n",["$","li",null,{"children":"The wiring I had to do for this demo will be done for you by tools"}],"\n",["$","li",null,{"children":"Server side rendering works, HTML is sent to the client"}],"\n",["$","li",null,{"children":["The hydration payload is sent in a non-blocking way ",["$","em",null,{"children":"with"}]," the HTML"]}],"\n",["$","li",null,{"children":"Static site generation works too, the site can be compiled in a build step"}],"\n",["$","li",null,{"children":"ESM are getting ready"}],"\n",["$","li",null,{"children":"100% on Lighthouse!"}],"\n"]}],"\n",["$","h2",null,{"children":"Who?"}],"\n",["$","p",null,{"children":["Hacked together by ",["$","a",null,{"href":"http://github.com/wooorm","children":["$","strong",null,{"children":"$@wooorm"}]}],".\nThanks to ",["$","a",null,{"href":"http://github.com/gaearon","children":["$","strong",null,{"children":"$@gaearon"}]}]," for the tips."]}],"\n",["$","p",null,{"children":["Fork me on ",["$","a",null,{"href":"https://github.com/wooorm/server-components-mdx-demo","children":"GitHub"}],"."]}],"\n",["$","p",null,{"children":"P.S., here‚Äôs that image mentioned before, the data used to hydrate this page:"}],"\n"]}]
